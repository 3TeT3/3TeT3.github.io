<!doctype html>
<html lang="en">
    <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">

    <title>終極密碼</title>
    <style>
.btn{
    width: calc(80% / 3);
    margin-top: 10px;
    margin-left: 5%;
    padding: 5px;
    align-items: center;
}
input{
    text-align: center;
}
.btn-replay{
    width: 100%;
    justify-content: center;
}
    </style>
    </head>
<body>

    <button class="btn-replay btn-primary" onclick="replay()">重玩</button>
    <div class="box border border-dark m-2 text-center" style="height: 40px;"></div>
    <div class="row">
    <input class="input">
    </div>
    <div class="row row-cols-3 border">
        <button class="btn btn-dark num ">1</button>
        <button class="btn btn-dark num ">2</button>
        <button class="btn btn-dark num ">3</button>
        <button class="btn btn-dark num ">4</button>
        <button class="btn btn-dark num ">5</button>
        <button class="btn btn-dark num ">6</button>
        <button class="btn btn-dark num ">7</button>
        <button class="btn btn-dark num ">8</button>
        <button class="btn btn-dark num ">9</button>
        <button class="btn btn-danger" onclick="clear()">x</button>
        <button class="btn btn-dark num">0</button>
        <button class="btn btn-success" onclick="check()">v</button>
    </div>

    <script>
        let keyInBtns = document.querySelectorAll('.num');
        let box = document.querySelector('.box'); //顯示範圍
        let input = document.querySelector(".input");
        let min = 0;
        let max = 100;
        let result;
    window.onload = function () {
        replay();
        document.querySelector(".btn-danger").addEventListener("click", function (event) {
            clear();
        })
    }

    //數字輸入
    keyInBtns.forEach( k=>{
        k.addEventListener('click', ()=>{keyIn()});
    });
    function keyIn(){
        input.value += event.target.innerText;
    }

function replay() {
    min = 0;
    max = 100;
    anser = Math.floor(Math.random() * 100) + 1;
    show();
};
function clear() {
    input.value = "";
    box.value = "";
}
function check() {
    let result = parseInt(input.value);
    if (result < min) {
        alert(`不行小於${min}`);
    }
    else if (result > max) {
        alert(`不行大於${max}`);
    }
    else if(result == anser){
        alert("恭喜答對");
        alert("遊戲已重新開始");
        replay();
        return;
    }

    if(anser > result){
        min = result;
    }
    if(anser < result){
        max = result;
    }
    show();
}
function show() {
    box.innerHTML = `${min}~${max}`;
    clear();
}

        </script>
    </body>
</html>